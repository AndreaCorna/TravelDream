<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:head>
#{utente.caricaProfiloUtente()}
#{prenotazione.mostraPrenotazioni()}
#{pacchetto.mostraOfferte()}
</h:head>
<h:body>
	
<h:form id="form">
   
	<p:graphicImage value="../immagini/principale.jpg" />
               
    <p:tabView effect="drop" effectDuration="normal">
		 <p:tab title="Offerte Speciali">
        	<h:panelGrid columns="4" id="regOff">
    			<p:dataTable id="tabellaOff" var="pac" value="#{pacchetto.datiPacchettiCasuali}" widgetVar="tabellaOfferte"   
          			  emptyMessage="Nessuna offeta soddisfa i requisiti di ricerca" filteredValue="#{pacchetto.listaPacchettiSelezionati}"
          			  		selectionMode="single" >  
  
  
         		<f:facet name="header">  
          			  <p:outputPanel>  
              		  		<h:outputText value=" Benvenuto #{utente.getUsername()} 
acquista una delle nostre offerte speciali scelte per te e personalizzala come vuoi!!!" />  
               		 		</p:outputPanel>  
       			 </f:facet>  
  
		        <p:column id="dest"
		                headerText="Destinazione" 
		               >  
		            <h:outputText value="#{pac.destinazione}" />  
		        </p:column> 
		        
		        <p:column id="hotel"   
		                headerText="Soggiorno presso " >  
		            <h:outputText value="#{pac.hotels.get(0).nome}" />  
		        </p:column>
		        
		        <p:column id="fine_Validita"   
		                headerText="Puoi acquistare il pacchetto fino al " >  
		            <h:outputText value="#{pac.fine_Validita}" />  
		        </p:column> 
		        
		        <p:column id="descri" headerText="Descrizione"   >  
		            <h:outputText value="#{pac.descrizione}" />  
		        </p:column>  
		        
		        <p:column headerText="" style="width:24%" >  
                <h:link outcome = "buyPacchetto?id=#{pac.id}"  value="ACQUISTALO SUBITO"/>
         </p:column>  
  
		        	 </p:dataTable>  
      	<p></p>
      	</h:panelGrid>
      	
  
  
 
		
        </p:tab>
		  
         <p:tab title="Profilo">
            <h:panelGrid columns="2" cellpadding="10">
                <p:graphicImage value="/images/godfather/godfather1.jpg" />
                <h:outputLabel  for="nome" />Nome:
                <h:outputText id="nome" value="#{utente.utente.nome}" />
                <h:outputLabel for="cognome">Cognome:</h:outputLabel>
                <h:outputText id="cognome" value="#{utente.utente.cognome}" />
                <h:outputLabel  for="residenza">Residenza:</h:outputLabel>
                <h:outputText id="residenza" value="#{utente.utente.residenza}" />
                <h:outputLabel  for="data_nascita">Data di Nascita:</h:outputLabel>
                <h:outputText id="data_nascita" value="#{utente.utente.dataNascita}" />
                <h:outputLabel for="luogo_nascita">Luogo di Nascita:</h:outputLabel>
                <h:outputText id="luogo_nascita" value="#{utente.utente.luogoNascita}" />
                <h:outputLabel  for="cf">Codice Fiscale:</h:outputLabel>
                <h:outputText id = "cf" value="#{utente.utente.codiceFiscale}" />
                <h:outputLabel  for="telefono">Telefono:</h:outputLabel>
                <h:outputText id = "telefono" value="#{utente.utente.telefono}" />
                <h:outputLabel  for="email">Email:</h:outputLabel>
                <h:outputText id = "email" value="#{utente.utente.email}" />
                <p><a href="modificaProfilo.xhtml">Modifica il tuo profilo</a></p>
            </h:panelGrid>
        </p:tab>
  
        <p:tab title="Acquista Viaggio">
         <h:panelGrid columns="2" cellpadding="10">
         	<p></p>
       		<p><a href="acquistaViaggio.xhtml">Cerca un Volo</a></p>
			<p></p>
			<p><a href="acquistaHotelViaggio.xhtml">Cerca un Hotel</a></p>
			<p></p>
			<p></p>
			<p><a href="acquistaEscursione.xhtml">Cerca un Escursione</a></p>
			<p></p>
		</h:panelGrid>
		
		</p:tab>
		<p:tab title="Mostra Prenotazioni">
        	<h:panelGrid columns="4" id="regGrid">
    			<p:dataTable id="tabella" var="pac" value="#{prenotazione.datiPrenotazione}" widgetVar="tabellaPrenotazioni"   
          			  emptyMessage="Non hai effettuato alcuna prenotazione" filteredValue="#{prenotazione.prenotazioniSelezionate}"
          			  		selectionMode="single" >  
  
         		<f:facet name="header">  
          			  <p:outputPanel>  
              		  		<h:outputText value="PACCHETTI CHE HAI PRENOTATO -> Cerca  su tutti i campi:" />  
               		 		<p:inputText id="globalFilter" onkeyup="tabellaPrenotazioni.filter()" style="width:150px" />  
            			</p:outputPanel>  
       			 </f:facet>  
  
		        <p:column id="aereoAndata" filterBy="aereoAndata"   
		                headerText="aereo Andata" footerText="aereoAndata"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.aereoAndata.data}" />  
		        </p:column>   
		         <p:column id="aereoRitorno" filterBy="aereoRitorno"   
		                headerText="aereo Ritorno" footerText="aereoRItorno"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.aereoRitorno.data}" />  
		        </p:column> 
		        <p:column id="hotel" filterBy="hotel"   
		                headerText="hotel" footerText="hotel"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.hotel.nome}" />  
		        </p:column> 
		        
		        		        <p:column id="escursioni" filterBy="escursioni"   
		                headerText="escursioni" footerText="escursioni"  
		                filterMatchMode="contains">  
		        		<p:dataList value="#{pac.escursioni}" var="escur" itemType="circle">  
   				 			#{escur.luogo}, #{escur.data}  
				</p:dataList>   
				</p:column> 
				 <p:column headerText="Informazioni" style="width:24%" >  
		         <p:commandButton id="info" update=":form:display" oncomplete="PF('dlg2').show()" icon="ui-icon-search" title="View">  
               				 <f:setPropertyActionListener value="#{pac}" target="#{prenotazione.selezione}" />  
           		</p:commandButton> 
		        
		         <p:growl id="msg" showDetail="true" escape="false" />
		         </p:column>
		        <p:column headerText="Modifica" style="width:24%" > 
		         <p:commandLink value="Modifica" action="#{prenotazione.modificaPrenotazione}" 
		         		actionListener="#{prenotazione.settaPrenotazione(pac.id)}" update="msg"/>
		      	
                </p:column>
  
		        	 </p:dataTable>
		        	 </h:panelGrid>
		        	 <h:panelGrid columns="4" id="regGrid2">
    			 
  
		        <p:dataTable id="tabellaViaggi" var="pacV" value="#{prenotazione.datiPrenotazioneViaggio}" widgetVar="tabellaPrenotazioniViaggi"   
          			  emptyMessage="Non hai effettuato alcuna prenotazione" filteredValue="#{prenotazione.prenotazioniViaggioSelezionate}"
          			selectionMode="single" >  
  
         		<f:facet name="header">  
          			  <p:outputPanel>  
              		  		<h:outputText value="VIAGGI CHE HAI PRENOTATO -> Cerca  su tutti i campi:" />  
               		 		<p:inputText id="globalFilter" onkeyup="tabellaPrenotazioniViaggi.filter()" style="width:150px" />  
            			</p:outputPanel>  
       			 </f:facet>  
		       
		        <p:column id="partenza" filterBy="partenza"   
		                headerText="aereo Andata" footerText="aereo Andata"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pacV.aereoAndata.data}" />  
		        </p:column>   
		       	<p:column id="destinazionea" filterBy="aereoAndata"   
		                headerText="destinazione " footerText="destinazione"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pacV.aereoAndata.cittaAtterraggio}" />  
		        </p:column>   
				 <p:column id="ritorno" filterBy="partenza"   
		                headerText="aereo Ritorno" footerText="aereo Ritorno"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pacV.aereoRitorno.data}" />  
		        </p:column>   
		       	<p:column id="destinazione" filterBy="aereoRitorno"   
		                headerText="destinazione " footerText="destinazione"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pacV.aereoRitorno.cittaAtterraggio}" />  
		        </p:column>
		      
		        <p:column id="hotel" filterBy="hotel"   
		                headerText="hotel" footerText="hotel"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pacV.hotel.nome}" />  
		        </p:column> 
		        		        <p:column id="escursioni" filterBy="escursioni"   
		                headerText="escursioni" footerText="escursioni"  
		                filterMatchMode="contains">  
		        		<p:dataList value="#{pacV.escursioni}" var="escur" itemType="circle">  
   				 			#{escur.luogo}, #{escur.data}  
				</p:dataList>   
				</p:column> 
				
  
		        	 </p:dataTable>  
      	<p></p>
      	</h:panelGrid>
			</p:tab>
			<p:tab title="Lista Offerte">
        	<h:panelGrid columns="4" id="regOff2">
    			<p:dataTable id="tabellaOff2" var="pac" value="#{pacchetto.datiPacchetti}" widgetVar="tabellaOfferte"   
          			  emptyMessage="Nessuna offeta soddisfa i requisiti di ricerca" filteredValue="#{pacchetto.listaPacchettiSelezionati}"
          			  		selectionMode="single" >  
  
         		<f:facet name="header">  
          			  <p:outputPanel>  
              		  		<h:outputText value="Cerca  su tutti i campi:" />  
               		 		<p:inputText id="globalFilter" onkeyup="tabellaOfferte.filter()" style="width:150px" />  
            			</p:outputPanel>  
       			 </f:facet>  
       			 
       			  <p:column id="idPacchetto" filterBy="id"   
		                headerText="Id" footerText="Id"
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.id}" />  
		        </p:column>
  
		        <p:column id="dest" filterBy="destinazione"   
		                headerText="Destinazione" footerText="Destinazione"
		                filterOptions="#{pacchetto.destinazioni}"
		                filterMatchMode="exact">  
		            <h:outputText value="#{pac.destinazione}" />  
		        </p:column> 
		        
		        <p:column id="inizio_Validita" filterBy="inizio_Validita"   
		                headerText="Inizio Offerta" footerText="Inizio Offerta"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.inizio_Validita}" />  
		        </p:column>
		        
		        <p:column id="fine_Validita" filterBy="fine_Validita"   
		                headerText="Fine Offerta" footerText="Fine Offerta"  
		                filterMatchMode="contains">  
		            <h:outputText value="#{pac.fine_Validita}" />  
		        </p:column> 
		        
		        <p:column id="descri" headerText="Descrizione" footerText="Descrizione"  >  
		            <h:outputText value="#{pac.descrizione}" />  
		        </p:column>  
		        
		        <p:column headerText="Personalizza" style="width:24%" >  
                <h:link outcome = "buyPacchetto?id=#{pac.id}"  value="Personalizza"/>
         </p:column>  
  
		        	 </p:dataTable>  
      	<p></p>
      	</h:panelGrid>
		
			</p:tab>
	
    </p:tabView>
    <p:dialog  header="Dettagli Prenotazione" widgetVar="dlg2" modal="true" height="500">  
		<h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;"> 
		<f:facet name="header">   
	    <h:outputText value="Dettagli prenotazione." />
	    </f:facet>
	    <h:outputText value="Id prenotazione"/>
	    <h:outputText value="#{prenotazione.selezione.id}" style="font-weight:bold"/>  
	    <h:outputText value="Id Pacchetto" />
	    <h:outputText value="#{prenotazione.selezione.pacchetto.id}" style="font-weight:bold"/> 
	    <h:outputText value="Id Aereo Andata" />
	    <h:outputText value="#{prenotazione.selezione.aereoAndata.id}" style="font-weight:bold"/>   
	    <h:outputText value="Id Aereo Ritorno" />
	    <h:outputText value="#{prenotazione.selezione.aereoRitorno.id}" style="font-weight:bold"/>   
	    <h:outputText value="Hotel" />
	    <h:outputText value="#{prenotazione.selezione.hotel.nome}" style="font-weight:bold"/> 
	    <h:outputText value="Link per la condivisione" />
	    <h:outputText value="#{prenotazione.selezione.link}" style="font-weight:bold"/> 
	    <h:outputLabel value="Escursioni" />
		<p:dataList value="#{prenotazione.selezione.escursioni}" var="escur" itemType="circle">  
   				 	#{escur.id}, #{escur.luogo}, #{escur.data}  
		</p:dataList>   
		<h:outputText value="Data Partenza" />
	    <h:outputText value="#{prenotazione.selezione.aereoAndata.data}" style="font-weight:bold"/> 
	    <h:outputText value="Data Ritorno" />
	    <h:outputText value="#{prenotazione.selezione.aereoRitorno.data}" style="font-weight:bold"/> 
	    <h:outputText value="Data della Prenotazione" />
	    <h:outputText value="#{prenotazione.selezione.data}" style="font-weight:bold"/>   
	    </h:panelGrid>
	</p:dialog>  

</h:form>
		<h:form>
		<p></p>
		<p:commandButton action="#{logout.logout}" value="Logout" />
	</h:form>
</h:body>
</html>
